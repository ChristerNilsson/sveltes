var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function s(t){t.forEach(e)}function a(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function o(t){return null==t?"":t}function r(t,e){t.appendChild(e)}function i(t,e,n){t.insertBefore(e,n||null)}function l(t){t.parentNode.removeChild(t)}function f(t){return document.createElement(t)}function u(t){return document.createTextNode(t)}function d(){return u(" ")}function $(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function h(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function p(t,e){e=""+e,t.data!==e&&(t.data=e)}function b(t,e,n,s){t.style.setProperty(e,n,s?"important":"")}let g;function m(t){g=t}function k(){const t=g;return(e,n)=>{const s=t.$$.callbacks[e];if(s){const a=function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(e,n);s.slice().forEach(e=>{e.call(t,a)})}}}const v=[],x=[],_=[],y=[],w=Promise.resolve();let E=!1;function S(t){_.push(t)}function N(){const t=new Set;do{for(;v.length;){const t=v.shift();m(t),M(t.$$)}for(;x.length;)x.pop()();for(let e=0;e<_.length;e+=1){const n=_[e];t.has(n)||(n(),t.add(n))}_.length=0}while(v.length);for(;y.length;)y.pop()();E=!1}function M(t){t.fragment&&(t.update(t.dirty),s(t.before_update),t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_update.forEach(S))}const A=new Set;let C;function D(t,e){t&&t.i&&(A.delete(t),t.i(e))}function O(t,e,n,s){if(t&&t.o){if(A.has(t))return;A.add(t),C.c.push(()=>{A.delete(t),s&&(n&&t.d(1),s())}),t.o(e)}}function j(t,n,c){const{fragment:o,on_mount:r,on_destroy:i,after_update:l}=t.$$;o.m(n,c),S(()=>{const n=r.map(e).filter(a);i?i.push(...n):s(n),t.$$.on_mount=[]}),l.forEach(S)}function L(t,e){t.$$.fragment&&(s(t.$$.on_destroy),t.$$.fragment.d(e),t.$$.on_destroy=t.$$.fragment=null,t.$$.ctx={})}function U(t,e){t.$$.dirty||(v.push(t),E||(E=!0,w.then(N)),t.$$.dirty=n()),t.$$.dirty[e]=!0}function z(e,a,c,o,r,i){const l=g;m(e);const f=a.props||{},u=e.$$={fragment:null,ctx:null,props:i,update:t,not_equal:r,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:[]),callbacks:n(),dirty:null};let d=!1;var $;u.ctx=c?c(e,f,(t,n,s=n)=>(u.ctx&&r(u.ctx[t],u.ctx[t]=s)&&(u.bound[t]&&u.bound[t](s),d&&U(e,t)),n)):f,u.update(),d=!0,s(u.before_update),u.fragment=o(u.ctx),a.target&&(a.hydrate?u.fragment.l(($=a.target,Array.from($.childNodes))):u.fragment.c(),a.intro&&D(e.$$.fragment),j(e,a.target,a.anchor),N()),m(l)}class B{$destroy(){L(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}function P(e){var n,s,a,c;return{c(){n=f("button"),s=u(e.title),h(n,"class",a=o(e.klass)+" svelte-hrvg8g"),n.disabled=e.disabled,c=$(n,"click",e.click)},m(t,e){i(t,n,e),r(n,s)},p(t,e){t.title&&p(s,e.title),t.klass&&a!==(a=o(e.klass)+" svelte-hrvg8g")&&h(n,"class",a),t.disabled&&(n.disabled=e.disabled)},i:t,o:t,d(t){t&&l(n),c()}}}function W(t,e,n){let{click:s,disabled:a,title:c,klass:o}=e;return window.innerWidth<600&&n("klass",o="col1"),t.$set=(t=>{"click"in t&&n("click",s=t.click),"disabled"in t&&n("disabled",a=t.disabled),"title"in t&&n("title",c=t.title),"klass"in t&&n("klass",o=t.klass)}),{click:s,disabled:a,title:c,klass:o}}class q extends B{constructor(t){super(),z(this,t,W,P,c,["click","disabled","title","klass"])}}function I(e){var n,s,a,c,o,d,b,g,m,k,v=e.state.action+"",x=e.state.a+"",_=e.state.b+"",y=e.state.hist+"";return{c(){n=f("button"),s=u(v),a=u(" a:"),c=u(x),o=u(" b:"),d=u(_),b=u(" hist:["),g=u(y),m=u("]"),h(n,"class","col1"),k=$(n,"click",e.fixState)},m(t,e){i(t,n,e),r(n,s),r(n,a),r(n,c),r(n,o),r(n,d),r(n,b),r(n,g),r(n,m)},p(t,e){t.state&&v!==(v=e.state.action+"")&&p(s,v),t.state&&x!==(x=e.state.a+"")&&p(c,x),t.state&&_!==(_=e.state.b+"")&&p(d,_),t.state&&y!==(y=e.state.hist+"")&&p(g,y)},i:t,o:t,d(t){t&&l(n),k()}}}function T(t,e,n){const s=k();let{state:a}=e;return t.$set=(t=>{"state"in t&&n("state",a=t.state)}),{state:a,fixState:()=>s("fixstate",a)}}class V extends B{constructor(t){super(),z(this,t,T,I,c,["state"])}}function F(t,e,n){const s=Object.create(t);return s.state=e[n],s}function G(t){var e,n=new V({props:{state:t.state}});return n.$on("fixstate",t.fixstate_handler),{c(){n.$$.fragment.c()},m(t,s){j(n,t,s),e=!0},p(t,e){var s={};t.states&&(s.state=e.state),n.$set(s)},i(t){e||(D(n.$$.fragment,t),e=!0)},o(t){O(n.$$.fragment,t),e=!1},d(t){L(n,t)}}}function H(t){var e,n;let a=t.states,c=[];for(let e=0;e<a.length;e+=1)c[e]=G(F(t,a,e));const o=t=>O(c[t],1,1,()=>{c[t]=null});return{c(){e=f("div");for(let t=0;t<c.length;t+=1)c[t].c()},m(t,s){i(t,e,s);for(let t=0;t<c.length;t+=1)c[t].m(e,null);n=!0},p(t,n){if(t.states){let r;for(a=n.states,r=0;r<a.length;r+=1){const s=F(n,a,r);c[r]?(c[r].p(t,s),D(c[r],1)):(c[r]=G(s),c[r].c(),D(c[r],1),c[r].m(e,null))}for(C={r:0,c:[],p:C},r=a.length;r<c.length;r+=1)o(r);C.r||s(C.c),C=C.p}},i(t){if(!n){for(let t=0;t<a.length;t+=1)D(c[t]);n=!0}},o(t){c=c.filter(Boolean);for(let t=0;t<c.length;t+=1)O(c[t]);n=!1},d(t){t&&l(e),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(c,t)}}}function J(t,e,n){let{states:s}=e;return t.$set=(t=>{"states"in t&&n("states",s=t.states)}),{states:s,fixstate_handler:function(e){!function(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(t=>t(e))}(t,e)}}}class K extends B{constructor(t){super(),z(this,t,J,H,c,["states"])}}function Q(t){var e,n,s,a,c,o,$,g,m,k,v,x,_,y=new q({props:{klass:"col3",title:"+2",click:t.func,disabled:t.a==t.b}}),w=new q({props:{klass:"col3",title:"*2",click:t.func_1,disabled:t.a==t.b}}),E=new q({props:{klass:"col3",title:"/2",click:t.func_2,disabled:t.a==t.b}}),S=new q({props:{klass:"col2",title:"New",click:t.func_3,disabled:t.a!=t.b}}),N=new q({props:{klass:"col2",title:"Undo",click:t.func_4,disabled:0==t.hist.length}}),M=function(t){var e,n=new K({props:{states:t.states}});return n.$on("fixstate",t.fixState),{c(){n.$$.fragment.c()},m(t,s){j(n,t,s),e=!0},p(t,e){var s={};t.states&&(s.states=e.states),n.$set(s)},i(t){e||(D(n.$$.fragment,t),e=!0)},o(t){O(n.$$.fragment,t),e=!1},d(t){L(n,t)}}}(t);return{c(){e=f("h1"),n=u(t.a),s=d(),a=f("h1"),c=u(t.b),o=d(),y.$$.fragment.c(),$=d(),w.$$.fragment.c(),g=d(),E.$$.fragment.c(),m=d(),S.$$.fragment.c(),k=d(),N.$$.fragment.c(),v=d(),M&&M.c(),x=u(""),h(e,"class","col2 svelte-uf68ax"),b(e,"font-size","60px"),b(e,"color","red"),h(a,"class","col2 svelte-uf68ax"),b(a,"font-size","60px"),b(a,"color","green")},m(t,l){i(t,e,l),r(e,n),i(t,s,l),i(t,a,l),r(a,c),i(t,o,l),j(y,t,l),i(t,$,l),j(w,t,l),i(t,g,l),j(E,t,l),i(t,m,l),j(S,t,l),i(t,k,l),j(N,t,l),i(t,v,l),M&&M.m(t,l),i(t,x,l),_=!0},p(t,e){_&&!t.a||p(n,e.a),_&&!t.b||p(c,e.b);var s={};(t.a||t.b)&&(s.disabled=e.a==e.b),y.$set(s);var a={};(t.a||t.b)&&(a.disabled=e.a==e.b),w.$set(a);var o={};(t.a||t.b)&&(o.disabled=e.a==e.b),E.$set(o);var r={};(t.a||t.b)&&(r.disabled=e.a!=e.b),S.$set(r);var i={};t.hist&&(i.disabled=0==e.hist.length),N.$set(i),M.p(t,e)},i(t){_||(D(y.$$.fragment,t),D(w.$$.fragment,t),D(E.$$.fragment,t),D(S.$$.fragment,t),D(N.$$.fragment,t),D(M),_=!0)},o(t){O(y.$$.fragment,t),O(w.$$.fragment,t),O(E.$$.fragment,t),O(S.$$.fragment,t),O(N.$$.fragment,t),O(M),_=!1},d(t){t&&(l(e),l(s),l(a),l(o)),L(y,t),t&&l($),L(w,t),t&&l(g),L(E,t),t&&l(m),L(S,t),t&&l(k),L(N,t),t&&l(v),M&&M.d(t),t&&l(x)}}}const R="ADD",X="MUL",Y="DIV",Z="NEW",tt="UNDO";function et(t,e,n){let s=null,a=null,c=[],o=[];const r=t=>{(()=>{if(o.length>0){let t=o[o.length-1];n("a",s=t.a),n("b",a=t.b),n("hist",c=t.hist.slice())}})(),t==R?(c.push(s),n("hist",c),n("a",s+=2)):t==X?(c.push(s),n("hist",c),n("a",s*=2)):t==Y?(c.push(s),n("hist",c),n("a",s/=2)):t==Z?(n("a",s=i(1,20)),n("b",a=i(1,20)),n("hist",c=[])):t==tt?(n("a",s=c.pop()),n("hist",c)):console.log("Missing action: "+t),(t=>{{let e={action:t,a:s,b:a,hist:c.slice()};o.push(e),n("states",o)}})(t)},i=(t,e)=>t+Math.floor((e-t+1)*Math.random());r(Z);return{a:s,b:a,hist:c,states:o,op:r,fixState:t=>{console.log("fixState",t.detail),n("a",s=t.detail.a),n("b",a=t.detail.b),n("hist",c=t.detail.hist.slice())},func:()=>r(R),func_1:()=>r(X),func_2:()=>r(Y),func_3:()=>r(Z),func_4:()=>r(tt)}}return new class extends B{constructor(t){super(),z(this,t,et,Q,c,[])}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
